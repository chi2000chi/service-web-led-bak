<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.framework.webClient.dao.LedTemplateDao" >	<resultMap id="BaseResultMap" type="com.framework.webClient.entity.LedTemplate" >		<id column="MBID" property="mbid" />		<result column="MBMC" property="mbmc" />		<result column="MBBH" property="mbbh" />		<result column="MBLJ" property="mblj" />		<result column="CJSJ" property="cjsj" />		<result column="CJR" property="cjr" />		<result column="XGSJ" property="xgsj" />		<result column="XGR" property="xgr" />		<result column="BZ" property="bz" />	</resultMap>	<sql id="sql_select">		<![CDATA[			SELECT 				T.MBID AS "mbid",				T.MBMC AS "mbmc",				T.MBBH AS "mbbh",				T.MBLJ AS "mblj",				TO_CHAR(T.CJSJ, 'YYYY-MM-DD HH24:MI') AS "cjsj",				T.CJR AS "cjr",				TO_CHAR(T.XGSJ, 'YYYY-MM-DD HH24:MI') AS "xgsj",				T.XGR AS "xgr",				T.BZ AS "bz"			FROM LED_TEMPLATE  T 		]]>	</sql>	<select id="selectLedTemplateByInfo"  resultType="map" parameterType="map" >		<include refid="sql_select"></include>		<where>			<if test=" mbid != null and  mbid != '' ">				AND T.MBID = #{mbid}			</if>			<if test=" mbmc != null and  mbmc != '' ">				AND T.MBMC LIKE '%'||#{mbmc}||'%' 			</if>			<if test=" mbbh != null and  mbbh != '' ">				AND T.MBBH LIKE '%'||#{mbbh}||'%' 			</if>			<if test=" mbmc != null and  mbmc != '' and tag != null and tag != '' ">				AND T.MBMC = #{mbmc}			</if>			<if test=" mbbh != null and  mbbh != '' and tag != null and tag != '' ">				AND T.MBBH = #{mbbh}			</if>		</where>	</select>	<delete id="deleteLedTemplateById"  parameterType="string" >		delete from  LED_TEMPLATE  WHERE MBID = #{mbid} 	</delete>	<update id="updateLedTemplateById"  parameterType="map" >		UPDATE  LED_TEMPLATE SET 			MBMC = '${mbmc}',			MBBH = '${mbbh}',			MBLJ = '${mblj}',			XGSJ = sysdate,			XGR = '${xgr}'			<if test="bz != null and bz != ''">				,BZ = '${bz}'			</if>		WHERE MBID = #{mbid} 	</update>	<insert id="insertLedTemplate" parameterType="map" >		INSERT INTO LED_TEMPLATE (			MBID,			MBMC,			MBBH,			MBLJ,			CJSJ,			CJR,			XGSJ,			XGR			<if test="bz != null and bz != ''">				,BZ			</if>			)  VALUES  (			'${mbid}',			'${mbmc}',			'${mbbh}',			'${mblj}',			sysdate,			'${cjr}',			sysdate,			'${xgr}'			<if test="bz != null and bz != ''">				,'${bz}'			</if>			)	</insert>	<!-- 分区模版ID和分区类型查询分区区域设置信息 -->	<select id="selectQyszByMbidAndFqlx" parameterType="map" resultType="map">		SELECT			ledTemp.MBID AS "mbid",			ledTemp.MBMC AS "mbmc",			ledTemp.MBBH AS "mbbh",			TO_CHAR(ledTemp.CJSJ, 'YYYY-MM-DD HH24:MI') AS "cjsj",			ledTemp.CJR AS "cjr",			TO_CHAR(ledTemp.XGSJ, 'YYYY-MM-DD HH24:MI') AS "xgsj",			ledTemp.XGR AS "xgr",			ledTemp.MBLJ AS "mblj",			ledTempArea.FQID AS "fqid",			ledArea.FQLX AS "fqlx",			ledSjzd.ZDMC AS "fqlxmc",			ledArea.wjid AS "wjid",			ledAreaAttr.SXID AS "pzid",			ledAreaAttr.SXMC AS "csmc",			ledAreaAttr.SXZ AS "cssz",			ledAreaAttr.WJID AS "cswj"		FROM			LED_TEMPLATE ledTemp		JOIN LED_TEMPLATE_AREA ledTempArea ON LEDTEMP.MBID = LEDTEMPAREA.MBID		JOIN LED_AREA ledArea ON ledTempArea.FQID = ledArea.FQID		JOIN LED_AREA_ATTR ledAreaAttr ON ledArea.FQID = ledAreaAttr.FQID		JOIN LED_SJZD ledSjzd ON ledSjzd.pzdbm = '4' AND ledArea.FQLX = ledSjzd.zdbm				where LEDTEMP.MBID = #{mbid} and ledArea.FQID = #{fqid}		UNION ALL			SELECT				ledTemp.MBID AS "mbid",				ledTemp.MBMC AS "mbmc",				ledTemp.MBBH AS "mbbh",				TO_CHAR(ledTemp.CJSJ, 'YYYY-MM-DD HH24:MI') AS "cjsj",				ledTemp.CJR AS "cjr",				TO_CHAR(ledTemp.XGSJ, 'YYYY-MM-DD HH24:MI') AS "xgsj",				ledTemp.XGR AS "xgr",				ledTemp.MBLJ AS "mblj",				ledTempArea.FQID AS "fqid",				ledArea.FQLX AS "fqlx",				ledSjzd.ZDMC AS "fqlxmc",				ledArea.wjid AS "wjid",				ledAreaCommonset.PZID AS "pzid",				ledAreaCommonset.PZMC AS "csmc",				ledAreaCommonset.PZZ AS "cssz",				ledAreaCommonset.WJID AS "cswj"			FROM				LED_TEMPLATE ledTemp			JOIN LED_TEMPLATE_AREA ledTempArea ON LEDTEMP.MBID = LEDTEMPAREA.MBID			JOIN LED_AREA ledArea ON ledTempArea.FQID = ledArea.FQID			JOIN LED_AREA_COMMONSET ledAreaCommonset ON ledArea.FQID = ledAreaCommonset.FQID			JOIN LED_SJZD ledSjzd ON ledSjzd.pzdbm = '4' AND ledArea.FQLX = ledSjzd.zdbm				where LEDTEMP.MBID = #{mbid} and ledArea.FQID = #{fqid}					</select>	<select id="selectFileInfoByMbidAndFqlx" parameterType="map" resultType="map">	SELECT			ledTemp.MBID AS "mbid",			ledTemp.MBMC AS "mbmc",			ledTemp.MBBH AS "mbbh",			TO_CHAR(ledTemp.CJSJ, 'YYYY-MM-DD HH24:MI') AS "cjsj",			ledTemp.CJR AS "cjr",			TO_CHAR(ledTemp.XGSJ, 'YYYY-MM-DD HH24:MI') AS "xgsj",			ledTemp.XGR AS "xgr",			ledTemp.MBLJ AS "mblj",			ledTempArea.FQID AS "fqid",			ledArea.FQLX AS "fqlx",			ledArea.wjid AS "wjid",			ledAreaFile.WJID AS "fileid",			ledAreaFile.XH AS "xh",			ledAreaFileAttr.SXMC AS "csmc",			ledAreaFileAttr.SXZ AS "cssz"		FROM			LED_TEMPLATE ledTemp		JOIN LED_TEMPLATE_AREA ledTempArea ON LEDTEMP.MBID = LEDTEMPAREA.MBID		JOIN LED_AREA ledArea ON ledTempArea.FQID = ledArea.FQID		JOIN LED_AREA_FILE ledAreaFile ON ledArea.FQID = ledAreaFile.FQID		JOIN LED_AREA_FILE_ATTR ledAreaFileAttr ON ledAreaFile.WJID = ledAreaFileAttr.WJID			where LEDTEMP.MBID = #{mbid} and ledArea.FQID = #{fqid}	</select>		<select id="selectFileidByMbidAndFqlx" resultType="String" parameterType="map">		SELECT DISTINCT			ledAreaFile.WJID AS "fileid"		FROM			LED_TEMPLATE ledTemp		JOIN LED_TEMPLATE_AREA ledTempArea ON LEDTEMP.MBID = LEDTEMPAREA.MBID		JOIN LED_AREA ledArea ON ledTempArea.FQID = ledArea.FQID		JOIN LED_AREA_FILE ledAreaFile ON ledArea.FQID = ledAreaFile.FQID		JOIN LED_AREA_FILE_ATTR ledAreaFileAttr ON ledAreaFile.WJID = ledAreaFileAttr.WJID		where LEDTEMP.MBID = #{mbid} and ledArea.FQID = #{fqid}	</select>		<select id="selectFqidByMbidOrMcOrBh" parameterType="map" resultType="String">		SELECT DISTINCT			ledTempArea.FQID AS "fqid"		FROM			LED_TEMPLATE_AREA ledTempArea		LEFT JOIN LED_AREA ledArea ON ledTempArea.FQID = ledArea.FQID		LEFT JOIN LED_AREA_ATTR ledAreaAttr ON ledArea.FQID = ledAreaAttr.FQID		<where>			ledTempArea.MBID = #{mbid}		</where>	</select>	<!-- 查询分区模版下拉列表 -->	<select id="selectTemplateList" resultType="map">		SELECT 	MBID AS "mbid",	MBMC AS "mbmc" FROM	LED_TEMPLATE	</select></mapper>