<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.framework.webClient.dao.CommonDao" >	<!-- 查询线路信息 -->	<select id="selectXlxx" parameterType="map" resultType="map">		SELECT				JCXL.CKXLID AS "xlid",				JCXL.CKXLID AS "xlmc",				JCXL.XLMC AS "lpmc"			FROM				JC_XL jcxl				WHERE				JCXL.FLAG_NEW = 1			AND jcxl.ZT = 1			<if test="xlmc != null and xlmc != ''">				AND JCXL.CKXLID = #{xlmc}			</if>			<if test="valXlmc != null and valXlmc != ''">				AND JCXL.XLMC = #{valXlmc}			</if>			<if test=" q != null and  q != '' ">				AND JCXL.XLMC LIKE '%'||#{q}||'%' 			</if>			ORDER BY				JCXL.CKXLID ASC	</select>	<!-- 查询站点信息 -->	<select id="selectZdxx" parameterType="map" resultType="map">		SELECT				JCXL.CKXLID AS "xlid",				JCXL.CKXLID AS "xlmc",				JCXL.XLMC AS "lpmc",				JCZD.ZDID AS "zdid",				JCZD.ZDMC || '(' || DECODE(JCZD.YXFX, 0,'上行', 1,'下行') || ')'  AS "zdmc",				JCZD.ZDXH AS "zdxh"			FROM				JC_XL jcxl			JOIN JC_ZD jczd ON JCXL.CKXLID = JCZD.XLID			WHERE				JCXL.FLAG_NEW = 1			AND jcxl.ZT = 1			<if test="xlmc != null and xlmc != ''">				AND JCXL.CKXLID = #{xlmc}			</if>			<if test="valXlmc != null and valXlmc != ''">				AND JCXL.XLMC = #{valXlmc}			</if>			<if test="valZdmc != null and valZdmc != ''">				AND JCZD.ZDMC = #{valZdmc}			</if>			<if test="zdfx != null and zdfx != ''">				AND JCZD.YXFX = #{zdfx}			</if>			<if test=" q != null and  q != '' ">				AND JCZD.ZDMC LIKE '%'||#{q}||'%' 			</if>			ORDER BY				jczd.ZDXH ASC	</select>	<!-- 根据线路名称和站点组合查询运行方向 -->	<select id="selectFxByXlmcAndFangXiangZuhe" parameterType="map" resultType="String">		SELECT			T1."fx" AS fx		FROM			(				SELECT					DECODE (						JCZD.YXFX,						0,						'上行',						1,						'下行'					) AS "fx",					REPLACE (						TO_CHAR (							listagg(TO_CHAR(JCZD.ZDMC), ',') within group(order by TO_CHAR(JCZD.ZDMC))							<!-- wmsys.wm_concat (TO_CHAR(JCZD.ZDMC)) -->						),						',',						'->'					) AS "zdmc"				FROM					JC_XL jcxl				JOIN JC_ZD jczd ON JCXL.CKXLID = JCZD.XLID				WHERE					JCXL.FLAG_NEW = 1				AND jcxl.ZT = 1				AND JCXL.XLMC =  #{xlmc}				GROUP BY					JCZD.YXFX			) t1		WHERE			T1."zdmc" LIKE  '%'||#{fangXiangZuhe}||'%'	</select>	</mapper>