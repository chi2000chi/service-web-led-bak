<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.framework.webClient.dao.LedStateDao" >	<delete id="delStateByLedbh" parameterType="map">		DELETE FROM ${TABLENAME} WHERE LEDBH = #{ledbh}	</delete>	<select id="selectLedStateNewByLedbh" parameterType="map" resultType="map">		SELECT			*		FROM			(				SELECT					CPUWD AS "cpuwd",					BZWD AS "bzwd",					YJWDCJZ AS "yjwdcjz",					LEDWDCJZ AS "ledwdcjz",					ZDCGQCJZ AS "zdcgqcjz",					MJCGQ AS "mjcgq",					SWCGQ AS "swcgq",					JWMKZT AS "jwmkzt",					YJKQZT AS "yjkqzt",					LEDKQZT AS "ledkqzt",					FSKQZT AS "fskqzt",					ZMKQZT AS "zmkqzt",					DVRKQZT AS "dvrkqzt",					GLYQKQZT AS "glyqkqzt",					LEDBH AS "ledbh",					MAX (JSSJ) AS "jssj"				FROM					${TABLENAME}				WHERE					LEDBH = #{ledbh}				GROUP BY					cpuwd,					bzwd,					yjwdcjz,					ledwdcjz,					zdcgqcjz,					mjcgq,					swcgq,					jwmkzt,					yjkqzt,					ledkqzt,					fskqzt,					zmkqzt,					dvrkqzt,					glyqkqzt,					ledbh				ORDER BY					"jssj" DESC			) t1		WHERE			ROWNUM = 1	</select>	<select id="selectLedStateInfo" parameterType="map" resultType="map">		SELECT			LEDLED.LEDID AS "ledid",			LEDSTATE.ZTID as "ztid",			LEDLED.LEDMC AS "ledmc",			LEDLED.LEDBH AS "ledbh",			TO_CHAR(LEDSTATE.JSSJ, 'YYYY-MM-DD HH24:Mi:SS') AS "jssj"		FROM			${TABLENAME} ledstate		LEFT JOIN LED_LED ledled ON LEDLED.LEDBH = LEDSTATE.LEDBH		<where>			<!-- 去掉电子站牌状态表中没有LEDID的数据 -->			AND LEDLED.LEDID IS NOT NULL			<if test="ledmc != null and ledmc != ''">				AND	LEDLED.LEDMC  LIKE '%'||#{ledmc}||'%' 			</if>					<if test="ledbh != null and ledbh != ''">				AND LEDLED.LEDBH LIKE '%'||#{ledbh}||'%' 			</if>			<if test="jssjks != null and jssjks != ''">				AND TO_CHAR (LEDSTATE.JSSJ,	'YYYY-MM-DD') >= #{jssjks}			</if>			<if test="jssjjs != null and jssjjs != ''">				AND TO_CHAR (LEDSTATE.JSSJ,	'YYYY-MM-DD') <![CDATA[ <= ]]>  #{jssjjs}			</if>		</where>		order by LEDSTATE.JSSJ DESC,LEDSTATE.ZTID DESC	</select>	<select id="selectExceptionPoint" parameterType="map" resultType="map">		SELECT			ZDCGQCJZ AS "zdcgqcjz",			MJCGQ AS "mjcgq",			SWCGQ AS "swcgq",			JWMKZT AS "jwmkzt",			YJKQZT AS "yjkqzt",			LEDKQZT AS "ledkqzt",			FSKQZT AS "fskqzt",			ZMKQZT AS "zmkqzt",			DVRKQZT AS "dvrkqzt",			GLYQKQZT AS "glyqkqzt",			ZTID AS "ztid"		FROM			${TABLENAME}		WHERE			ZTID = #{ztid}	</select></mapper>